(this.webpackJsonpbutter=this.webpackJsonpbutter||[]).push([[0],{50:function(e,t,a){e.exports=a(91)},60:function(e,t,a){},86:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(28),s=a.n(o),i=a(8),c=a(20),l=a(48),u=a(17),p=a.n(u),m=a(23),d=a(6),h=a(7),v=a(10),f=a(9),y=(a(60),a(24)),g=a.n(y),E=(a(37),g.a.initializeApp({apiKey:"AIzaSyA3mPv1VGarfc26yBty0dyOJA3oAG-nnfQ",authDomain:"butterhn-b80de.firebaseapp.com",databaseURL:"https://butterhn-b80de.firebaseio.com",projectId:"butterhn-b80de",storageBucket:"butterhn-b80de.appspot.com",messagingSenderId:"7354074403",appId:"1:7354074403:web:7fdb429886ebeee06a7896",measurementId:"G-WNW9GV3WD7"})),b=a(49),N=a.n(b).a.create({baseURL:"https://hacker-news.firebaseio.com/v0/"}),S=a(30),O=a.n(S),T=function(e){return e?function(){var t=Object(m.a)(p.a.mark((function t(a){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=O.a.database().ref("/".concat(e,"/")),r=[],n.on("value",(function(e){null===(r=e.val())&&(r=[]),a({type:"SAVED_STORIES",payload:r})}),(function(e){a({type:"SAVED_STORIES",payload:[]})}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}():{type:"SAVED_STORIES",payload:[]}},k=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).signInWithGoogle=function(){var t=new g.a.auth.GoogleAuthProvider,a=g.a.auth();a.signInWithPopup(t).then((function(t){e.props.signIn(a.currentUser.uid,a.currentUser.photoURL)})).catch((function(e){console.log(e)}))},e.signOutOfGoogle=function(){g.a.auth().signOut().then((function(){e.props.signOut()})).catch((function(e){console.log(e)}))},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;E.auth().onAuthStateChanged((function(t){t?e.props.signIn(t.uid,t.photoURL):e.props.signOut()}))}},{key:"render",value:function(){var e=this;return this.props.isSignedIn?r.a.createElement("div",{className:"ui large image label",style:{display:"flex",backgroundColor:"#05386b",color:"white",cursor:"pointer"},onClick:function(){return e.signOutOfGoogle()}},r.a.createElement("img",{className:"ui avatar image",src:this.props.photoURL,alt:""}),"Sign Out"):r.a.createElement("div",{className:"ui large image label",style:{backgroundColor:"#05386b",color:"white",cursor:"pointer"},onClick:function(){return e.signInWithGoogle()}},"Sign In")}}]),a}(n.Component),I=Object(i.b)((function(e){return{isSignedIn:e.authentication.isSignedIn,photoURL:e.authentication.photoURL}}),{signIn:function(e,t){return{type:"SIGN_IN",payload:{userId:e,photoURL:t}}},signOut:function(){return{type:"SIGN_OUT"}}})(k),C=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onFormSubmit=function(t){t.preventDefault(),e.props.onSubmit(t.target.value)},e.mouseClickHandler=function(){e.props.flag?e.props.displayFilter(!1):e.props.displayFilter(!0)},e}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui segment container1",style:{backgroundColor:"#5cdb95"}},r.a.createElement("div",{className:"butter"},r.a.createElement("h1",{className:"h1"},"butter HN")),r.a.createElement("div",{className:"ui form searchbar"},r.a.createElement("div",{className:"ui icon input"},r.a.createElement("input",{type:"text",placeholder:"Search stories by title or author",onChange:this.onFormSubmit}),r.a.createElement("i",{className:"circular search icon"})),r.a.createElement("button",{className:"btn",onClick:this.mouseClickHandler},r.a.createElement("i",{className:"sliders horizontal icon big filter"}))),r.a.createElement("div",{className:"auth"},r.a.createElement(I,null)))}}]),a}(n.Component),j=Object(i.b)((function(e){return{flag:e.filter.flag}}),{displayFilter:function(e){return{type:"DISPLAY_FILTER",payload:{flag:e}}}})(C),x=(a(86),a(22)),w=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).agoTimeHelper=function(e){var t=Math.floor(e/1e3/60/60/24);e-=1e3*t*60*60*24;var a=Math.floor(e/1e3/60/60);e-=1e3*a*60*60;var n=Math.floor(e/1e3/60);return e-=1e3*n*60,0===t?0===a?0===n?"A few moments ago":1===n?"a minute ago":n+" minutes ago":1===a?"an hour ago":a+" hours ago":1===t?"a day ago":t+" days ago"},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchSavedStories(this.props.auth.userId)}},{key:"savedIconHandler",value:function(e){var t=this;return this.props.saved.includes(e)?r.a.createElement("i",{className:"bookmark saved icon",onClick:function(){return t.addSavedStory(e,!0)}}):r.a.createElement("i",{className:"bookmark saved outline icon",onClick:function(){return t.addSavedStory(e,!1)}})}},{key:"addSavedStory",value:function(e,t){if(this.props.auth.userId){var a=O.a.database().ref("/".concat(this.props.auth.userId,"/")),n=this.props.saved;if(t){var r=n.indexOf(e);r>-1&&n.splice(r,1)}else n.push(e);a.set(n)}}},{key:"renderList",value:function(e){var t=this,a=(new Date).getTime();return e.map((function(e){var n=a-1e3*e.time,o=0,s="0";return e.hasOwnProperty("kids")&&(o=e.kids.length,s=r.a.createElement(x.b,{to:"/comments/".concat(e.id)},o)),r.a.createElement("div",{className:"event ui segment",key:e.id,style:{backgroundColor:"#edf5e1",marginTop:"4px",marginBottom:"4px"}},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"summary"},r.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("h3",{style:{color:"#05386b"}},e.title)),r.a.createElement("div",{className:"extra text date"},r.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.url))),r.a.createElement("div",{className:"meta ui five column grid container",style:{margin:"auto"}},r.a.createElement("div",{className:"extra text column"},e.by),r.a.createElement("div",{className:"date column"},t.agoTimeHelper(n)),r.a.createElement("div",{className:"meta column"},r.a.createElement("i",{className:"comment outline icon"}),s),r.a.createElement("div",{className:"meta like column",style:{color:"#db2828"}},r.a.createElement("i",{className:"like red icon"}),e.score),r.a.createElement("div",{className:"column"},t.savedIconHandler(e.id)))))}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"ui relaxed divided list"},this.renderList(this.props.stories))}}]),a}(n.Component),P=Object(i.b)((function(e){return{auth:e.authentication,saved:e.saved}}),{fetchSavedStories:T})(w),H=(a(88),function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).classNameHelper=function(t){return t===e.props.currentPage?"active active1 item":"normal item"},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"bottomnavbar"},r.a.createElement("div",{className:"ui pagination flex-wrap menu"},r.a.createElement("div",{className:this.classNameHelper(1),onClick:function(){return e.props.page(1,e.props.storyType,e.props.saved)}},"1"),r.a.createElement("div",{className:this.classNameHelper(2),onClick:function(){return e.props.page(2,e.props.storyType,e.props.saved)}},"2"),r.a.createElement("div",{className:this.classNameHelper(3),onClick:function(){return e.props.page(3,e.props.storyType,e.props.saved)}},"3"),r.a.createElement("div",{className:this.classNameHelper(4),onClick:function(){return e.props.page(4,e.props.storyType,e.props.saved)}},"4"),r.a.createElement("div",{className:this.classNameHelper(5),onClick:function(){return e.props.page(5,e.props.storyType,e.props.saved)}},"5"),r.a.createElement("div",{className:this.classNameHelper(6),onClick:function(){return e.props.page(6,e.props.storyType,e.props.saved)}},"6"),r.a.createElement("div",{className:this.classNameHelper(7),onClick:function(){return e.props.page(7,e.props.storyType,e.props.saved)}},"7"),r.a.createElement("div",{className:this.classNameHelper(8),onClick:function(){return e.props.page(8,e.props.storyType,e.props.saved)}},"8"),r.a.createElement("div",{className:this.classNameHelper(9),onClick:function(){return e.props.page(9,e.props.storyType,e.props.saved)}},"9"),r.a.createElement("div",{className:this.classNameHelper(10),onClick:function(){return e.props.page(10,e.props.storyType,e.props.saved)}},"10")))}}]),a}(n.Component)),A=Object(i.b)((function(e){return{saved:e.saved}}),{})(H),L=(a(89),function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui segment",style:{position:"static"}},r.a.createElement("div",{className:"ui active inverted dimmer"},r.a.createElement("div",{className:"ui massive text loader"},"Loading...")))}}]),a}(n.Component)),R=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).agoTimeHelper=function(e){var t=Math.floor(e/1e3/60/60/24);e-=1e3*t*60*60*24;var a=Math.floor(e/1e3/60/60);e-=1e3*a*60*60;var n=Math.floor(e/1e3/60);return e-=1e3*n*60,0===t?0===a?0===n?"A few moments ago":1===n?"a minute ago":n+" minutes ago":1===a?"an hour ago":a+" hours ago":1===t?"a day ago":t+" days ago"},e.loaderHandler=function(){return e.props.loading?r.a.createElement(L,null):r.a.createElement("div",{className:"bg"},r.a.createElement("div",{className:"ui relaxed divided list"},e.renderComments(e.props.comments)))},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchingComments(),this.props.displayComments(this.props.storyId)}},{key:"componentDidUpdate",value:function(e){e.storyId!==this.props.storyId&&(this.props.fetchingComments(),this.props.displayComments(this.props.storyId))}},{key:"renderComments",value:function(e){var t=this,a=(new Date).getTime();return e.map((function(e){if(e.deleted)return null;var n=a-1e3*e.time,o=0,s="0",i="";return e.hasOwnProperty("kids")&&(o=e.kids.length,s=r.a.createElement(x.b,{to:"/comments/".concat(e.id)},o)),e.hasOwnProperty("text")&&(i=e.text.replace(/<(.|\n)*?>/g,"")),r.a.createElement("div",{className:"event ui segment",key:e.id,style:{backgroundColor:"#edf5e1",marginTop:"4px",marginBottom:"4px"}},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"summary"},i),r.a.createElement("div",{className:"meta ui five column grid container",style:{margin:"auto"}},r.a.createElement("div",{className:"extra text column"},e.by),r.a.createElement("div",{className:"date column"},t.agoTimeHelper(n)),r.a.createElement("div",{className:"meta column"},r.a.createElement("i",{className:"comment outline icon"}),s))))}))}},{key:"render",value:function(){return r.a.createElement("div",null,this.loaderHandler())}}]),a}(n.Component),_=Object(i.b)((function(e,t){return{storyId:t.match.params.id,comments:e.comments.result,loading:e.comments.isFetching}}),{fetchingComments:function(){return{type:"DISPLAY_COMMENTS",payload:{result:[],isFetching:!0}}},displayComments:function(e){return function(){var t=Object(m.a)(p.a.mark((function t(a){var n,r,o,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.get("item/".concat(e,".json"));case 2:if(!(n=t.sent).data.hasOwnProperty("kids")){t.next=10;break}return r=n.data.kids,o=r.map((function(e){return N.get("item/".concat(e,".json")).then((function(e){return e.data}))})),t.next=8,Promise.all(o);case 8:s=t.sent,a({type:"DISPLAY_COMMENTS",payload:{result:s,isFetching:!1}});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(R),D=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).onChangeValue=function(t){e.props.sort(t.target.value)},e.onChangeStoryValue=function(t){e.props.storyType(t.target.value)},e.savedColumn=function(){return e.props.isSignedIn?r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"ui form"},r.a.createElement("div",{className:"grouped fields",onChange:e.onChangeStoryValue},r.a.createElement("h4",null,"Saved"),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"ui radio checkbox"},r.a.createElement("input",{type:"radio",value:"saved",name:"storyType"}),r.a.createElement("label",null,"View Saved")))))):null},e}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui fluid"},r.a.createElement("div",{className:"ui four column relaxed equal height divided grid"},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"ui form"},r.a.createElement("div",{className:"grouped fields",onChange:this.onChangeValue},r.a.createElement("h4",null,"Sort By"),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"ui radio checkbox"},r.a.createElement("input",{type:"radio",value:"popularity",name:"sort",defaultChecked:"false"}),r.a.createElement("label",null,"Popularity"))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"ui radio checkbox"},r.a.createElement("input",{type:"radio",value:"title",name:"sort"}),r.a.createElement("label",null,"Title")))))),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"ui form"},r.a.createElement("div",{className:"grouped fields",onChange:this.onChangeStoryValue},r.a.createElement("h4",null,"Stories"),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"ui radio checkbox"},r.a.createElement("input",{type:"radio",value:"topstories",name:"storyType",defaultChecked:"false"}),r.a.createElement("label",null,"Top Stories"))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"ui radio checkbox"},r.a.createElement("input",{type:"radio",value:"newstories",name:"storyType"}),r.a.createElement("label",null,"New Stories"))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"ui radio checkbox"},r.a.createElement("input",{type:"radio",value:"beststories",name:"storyType"}),r.a.createElement("label",null,"Best Stories")))))),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"ui form"},r.a.createElement("div",{className:"grouped fields",onChange:this.onChangeStoryValue},r.a.createElement("h4",null,"HN"),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"ui radio checkbox"},r.a.createElement("input",{type:"radio",value:"askstories",name:"storyType"}),r.a.createElement("label",null,"Ask HN"))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"ui radio checkbox"},r.a.createElement("input",{type:"radio",value:"showstories",name:"storyType"}),r.a.createElement("label",null,"Show HN")))))),this.savedColumn()))}}]),a}(n.Component),U=Object(i.b)((function(e){return{isSignedIn:e.authentication.isSignedIn}}),{})(D),M=(a(90),a(4)),F=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).filterDisplayHandler=function(t){return t?r.a.createElement("div",{className:"filterlayout"},r.a.createElement(U,{sort:e.props.sortTypeSelection,storyType:e.props.storyTypeSelection})):null},e.onSearchSubmit=function(){var t=Object(m.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.searchStories(a);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadingHandler=function(t){return e.props.loading?r.a.createElement("div",{className:"main1"},e.filterDisplayHandler(e.props.flag),r.a.createElement(L,null)):r.a.createElement("div",{className:"main"},e.filterDisplayHandler(e.props.flag),r.a.createElement(P,{stories:t}))},e.storiesHelper=function(){var t=e.props.stories;switch(e.props.sortType){default:case"popularity":t.sort((function(e,t){return e.score>t.score?-1:1}));break;case"title":t.sort((function(e,t){return e.title>t.title?1:-1}))}return t=t.filter((function(t){return(t.title+" "+t.by).toLowerCase().includes(e.props.searchTerm.toLowerCase())})),r.a.createElement("div",null,r.a.createElement("div",{className:"navbar"},r.a.createElement(j,{onSubmit:e.onSearchSubmit})),e.loadingHandler(t),r.a.createElement("div",{className:"bottombar"},r.a.createElement(A,{storyType:e.props.storyType,page:e.props.displayStories,currentPage:e.props.currentPage})))},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchingStories(this.props.currentPage),this.props.displayStories(this.props.currentPage,this.props.storyType)}},{key:"componentDidUpdate",value:function(e){e.storyType!==this.props.storyType&&("saved"!==this.props.storyType?(this.props.fetchingStories(this.props.currentPage),this.props.displayStories(this.props.currentPage,this.props.storyType)):(this.props.fetchingStories(this.props.currentPage),this.props.displayStories(this.props.currentPage,this.props.storyType,this.props.saved)))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(x.a,{basename:"/buttergreen"},r.a.createElement("div",null,r.a.createElement(M.c,null,r.a.createElement(M.a,{path:"/",exact:!0,component:this.storiesHelper}),r.a.createElement(M.a,{path:"/comments/:id",exact:!0,component:_})))))}}]),a}(n.Component),Y=Object(i.b)((function(e){return{auth:e.authentication,saved:e.saved,loading:e.stories.isFetching,stories:e.stories.result,currentPage:e.stories.currentPage,flag:e.filter.flag,sortType:e.sort.sortType,storyType:e.storyType.type,searchTerm:e.search.searchTerm}}),{displayStories:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return function(){var n=Object(m.a)(p.a.mark((function n(r){var o,s,i,c;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=[],"saved"===t){n.next=8;break}return n.next=4,N.get("".concat(t,".json"));case 4:s=n.sent,o=s.data,n.next=9;break;case 8:o=a;case 9:return i=o.slice(20*(e-1),20*e).map((function(e){return N.get("item/".concat(e,".json")).then((function(e){return e.data}))})),n.next=12,Promise.all(i);case 12:c=n.sent,r({type:"DISPLAY_STORIES",payload:{result:c,currentPage:e,isFetching:!1}});case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},fetchingStories:function(e){return{type:"DISPLAY_STORIES",payload:{result:[],currentPage:e,isFetching:!0}}},fetchSavedStories:T,sortTypeSelection:function(e){return{type:"SORT_TYPE_SELECTION",payload:{sortType:e}}},storyTypeSelection:function(e){return{type:"STORY_TYPE_SELECTION",payload:{type:e}}},searchStories:function(e){return{type:"SEARCH_STORIES",payload:{searchTerm:e}}}})(F),G=Object(c.c)({saved:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"SAVED_STORIES"===t.type?t.payload:e},authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isSignedIn:!1,userId:null,photoURL:"untitled.png"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return{isSignedIn:!0,userId:t.payload.userId,photoURL:t.payload.photoURL};case"SIGN_OUT":return{isSignedIn:!1,userId:null,photoURL:"untitled.png"};default:return e}},stories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{result:[],currentPage:1,isFetching:!0},t=arguments.length>1?arguments[1]:void 0;return"DISPLAY_STORIES"===t.type?t.payload:e},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{result:[],isFetching:!0},t=arguments.length>1?arguments[1]:void 0;return"DISPLAY_COMMENTS"===t.type?t.payload:e},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{flag:!1},t=arguments.length>1?arguments[1]:void 0;return"DISPLAY_FILTER"===t.type?t.payload:e},sort:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sortType:"popularity"},t=arguments.length>1?arguments[1]:void 0;return"SORT_TYPE_SELECTION"===t.type?t.payload:e},storyType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"topstories"},t=arguments.length>1?arguments[1]:void 0;return"STORY_TYPE_SELECTION"===t.type?t.payload:e},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{searchTerm:""},t=arguments.length>1?arguments[1]:void 0;return"SEARCH_STORIES"===t.type?t.payload:e}}),V=Object(c.d)(G,Object(c.a)(l.a));s.a.render(r.a.createElement(i.a,{store:V},r.a.createElement(Y,null)),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.17d0f92f.chunk.js.map